"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6216],{6216:(J,C,s)=>{s.r(C),s.d(C,{ProfilePageModule:()=>k});var b=s(177),u=s(4341),l=s(4488),y=s(8986),_=s(467),M=s(5312);var h,D=s(1831),e=s(4438),v=s(4517),A=s(345),N=s(4412);class I{constructor(){this.dataSubject=new N.t(null),this.data$=this.dataSubject.asObservable()}updateData(i){void 0!==i&&this.dataSubject.next(i)}}(h=I).\u0275fac=function(i){return new(i||h)},h.\u0275prov=e.jDH({token:h,factory:h.\u0275fac,providedIn:"root"});var d,O=s(1626),w=s(3366),E=s(2404);const F=["descriptionTextarea"];function B(r,i){1&r&&e.nrm(0,"ion-spinner",26)}function U(r,i){if(1&r&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.name)}}function G(r,i){if(1&r&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.name)}}function L(r,i){if(1&r&&(e.j41(0,"ion-select-option",27),e.EFF(1),e.k0s()),2&r){const t=i.$implicit;e.FS9("value",t.id),e.R7$(),e.JRh(t.name)}}function $(r,i){1&r&&(e.j41(0,"ion-button",28),e.EFF(1,"Save Changes"),e.k0s())}function V(r,i){1&r&&(e.j41(0,"ion-button",29),e.nrm(1,"ion-spinner",30),e.k0s())}class S{constructor(i,t,o,n,a,c,m,p,P,z,H,X){this.ngZone=i,this.platform=t,this.sanitizer=o,this.dataService=n,this.http=a,this.apiService=c,this.networkService=m,this.router=p,this.navCtrl=P,this.alertCtrl=z,this.actionSheetCtrl=H,this.toastController=X,this.API_URL=M.c.API_URL,this.PUBLIC_URL=M.c.PUBLIC_URL,this.ProfileData={email:"",first_name:"",last_name:"",phone_number:"",whatsapp_number:"",country_id:"",city_id:"",category:"",bio:""},this.fileArray=[],this.base64Image="",this.fileImage="",this.userData={imageB64:""},this.apiLoader=!1,this.list=[],this.errorMessage="",this.page=1,this.perPage=0,this.totalData=0,this.totalPage=0,this.nodataavailable=!1,this.notificationsCount=0,this.followersCount=0,this.followingCount=0,this.likesCount=0,this.savedCount=0,this.hasClick=!1,this.countries=[],this.cities=[],this.categories=[]}ngOnInit(){var i,t,o,n,a,c,m,p,P;this.ProfileData.first_name=null!==(i=localStorage.getItem("Papricutcustomerfirstname"))&&void 0!==i?i:"",this.profilePic=null!==(t=localStorage.getItem("Papricutcustomerprofilepic"))&&void 0!==t?t:"../assets/imgs/profile.png",this.ProfileData.last_name=null!==(o=localStorage.getItem("Papricutcustomerlastname"))&&void 0!==o?o:"",this.ProfileData.email=null!==(n=localStorage.getItem("Papricutcustomeremail"))&&void 0!==n?n:"",this.ProfileData.phone_number=null!==(a=localStorage.getItem("Papricutcustomerphone_number"))&&void 0!==a?a:"",this.ProfileData.whatsapp_number=null!==(c=localStorage.getItem("Papricutcustomerwhatsapp_number"))&&void 0!==c?c:"",this.ProfileData.city_id=null!==(m=localStorage.getItem("Papricutcustomercity_id"))&&void 0!==m?m:"",this.ProfileData.country_id=null!==(p=localStorage.getItem("Papricutcustomercountry_id"))&&void 0!==p?p:"",this.ProfileData.category=null!==(P=localStorage.getItem("Papricutcustomercategory"))&&void 0!==P?P:"",this.getProfile()}countryEvent(i){this.getCities(i.detail.value)}getCities(i){this.apiLoader=!0,this.apiService.loadCities(i).then(t=>{this.apiLoader=!1,this.data=t,this.cities=this.data.result,this.ProfileData.city_id=this.ProfileData.city_id.toString(),this.ngZone.run(()=>{})})}updateProfile(){!0!==navigator.onLine?this.presentAlert("","Internet Connection","Please put data connection on and try again"):""===this.ProfileData.first_name?this.presentAlert("","","Enter your First Name"):""===this.ProfileData.last_name?this.presentAlert("","","Enter your Last Name"):""===this.ProfileData.email?this.presentAlert("","","Enter your Email Address"):""===this.ProfileData.phone_number?this.presentAlert("","","Enter your Mobile Number"):""===this.ProfileData.whatsapp_number?this.presentAlert("","","Enter your WhatsApp Number"):""===this.ProfileData.country_id?this.presentAlert("","","Select your country"):""===this.ProfileData.city_id?this.presentAlert("","","Select your city"):""===this.ProfileData.category?this.presentAlert("","","Select your category"):(this.hasClick=!0,this.apiService.updatePhotographerProfile(this.ProfileData).then(i=>{this.hasClick=!1,this.data=i,1==this.data.code&&(this.getProfile(),this.navCtrl.back()),this.presentAlert("","",this.data.message)},i=>{this.hasClick=!1,this.presentAlert("","","Request not sent. Please try again")}))}sanatizeBase64Image(i){return this.sanitizer.bypassSecurityTrustResourceUrl(i)}takePicture(){var i=this;return(0,_.A)(function*(){const t=yield D.i7.getPhoto({quality:90,allowEditing:!1,resultType:D.LK.Uri,source:D.ru.Prompt});t.webPath?(i.profilePic=t.webPath,i.photoData=yield fetch(t.webPath).then(o=>o.blob()),i.uploadProfilePhoto()):(console.error("Web path for the captured image is undefined."),i.toast("Failed to get file, please try again"))})()}uploadProfilePhoto(){var i=this;return(0,_.A)(function*(){const t=new FormData;if(null!=i.photoData&&null!=i.photoData){const n=i.photoData;let a=n;a.name=Date.now()+"."+n.type.split("/")[1],t.append("file",a,Date.now()+"."+n.type.split("/")[1])}const o=localStorage.getItem("PapricutAccessToken");null!==o&&t.append("accessToken",o),i.hasClick=!0,i.http.post(i.API_URL+"editProfilePic",t).subscribe(n=>{i.hasClick=!1;let a=JSON.stringify(n),c=JSON.parse(a);i.toast(c.message)},n=>{i.hasClick=!1,i.presentAlert("","Oops! Something went wrong","We couldn't complete your request due to a network issue or server error. Please check your internet connection and try again later. If the problem persists, contact support for assistance")})})()}toast(i){var t=this;return(0,_.A)(function*(){(yield t.toastController.create({message:i,duration:2e3,position:"bottom",mode:"ios",color:"dark"})).present()})()}getProfile(){!0!==navigator.onLine?this.presentAlert("","No Internet Connection!","Please put Internet Connection ON and try again"):(this.apiLoader=!0,this.apiService.getPhotographerProfile().then(i=>{this.data=i,this.apiLoader=!1,this.ProfileData.first_name=this.data.result.userDetails.first_name,this.data.result.userDetails.image_url&&(this.profilePic=this.PUBLIC_URL+this.data.result.userDetails.image_url),this.ProfileData.last_name=this.data.result.userDetails.last_name,this.ProfileData.email=this.data.result.userDetails.email,this.ProfileData.phone_number=this.data.result.userDetails.phone_number,this.ProfileData.whatsapp_number=this.data.result.userDetails.whatsapp_number,this.ProfileData.bio=this.data.result.userDetails.bio,this.countries=this.data.result.countries,this.categories=this.data.result.categories,this.data.result.userDetails.city_id&&(this.ProfileData.city_id=this.data.result.userDetails.city_id.toString()),this.data.result.userDetails.country_id&&(this.ProfileData.country_id=this.data.result.userDetails.country_id.toString(),this.getCities(this.ProfileData.country_id)),this.data.result.userDetails.category_id&&(this.ProfileData.category=this.data.result.userDetails.category_id.toString()),this.ngZone.run(()=>{}),localStorage.setItem("Papricutcustomerfirstname",this.ProfileData.first_name),localStorage.setItem("Papricutcustomerlastname",this.ProfileData.last_name),localStorage.setItem("Papricutcustomerprofilepic",this.profilePic)}))}presentAlert(i,t,o){var n=this;return(0,_.A)(function*(){yield(yield n.alertCtrl.create({header:i,subHeader:t,message:o,cssClass:"alertButtonCssAuto",buttons:["OK"]})).present()})()}ngAfterViewInit(){this.descriptionTextarea.getInputElement().then(i=>{this.adjustTextareaDirect(i)})}adjustTextarea(i){const t=i.target;t.style.height="auto",t.style.height=t.scrollHeight+"px"}adjustTextareaDirect(i){i.style.height="auto",i.style.height=i.scrollHeight+"px"}}var g;(d=S).\u0275fac=function(i){return new(i||d)(e.rXU(e.SKi),e.rXU(v.OD),e.rXU(A.up),e.rXU(I),e.rXU(O.Qq),e.rXU(w.G),e.rXU(E.A),e.rXU(y.Ix),e.rXU(v.q9),e.rXU(l.hG),e.rXU(l.GD),e.rXU(l.K_))},d.\u0275cmp=e.VBU({type:d,selectors:[["app-profile"]],viewQuery:function(i,t){if(1&i&&e.GBs(F,5),2&i){let o;e.mGM(o=e.lsd())&&(t.descriptionTextarea=o.first)}},decls:33,vars:25,consts:[["descriptionTextarea",""],["color","primary"],["slot","start"],["mode","md","color","light"],[1,"ion-padding"],["class","custom-spinner-center",4,"ngIf"],[3,"submit"],["size","3"],[1,"profile-header"],["text-center","",1,"profile-img",3,"click"],[3,"src"],[1,"upload-img"],["color","dark","name","camera"],["size","1"],["size","8"],["label","Mobile Number","label-placement","floating","fill","outline","type","tel","name","phone_number",3,"ngModelChange","value","ngModel","disabled"],["name","first_name","label","First Name","label-placement","floating","fill","outline",1,"mt-4",3,"ngModelChange","ngModel","disabled"],["name","last_name","label","Last Name","label-placement","floating","fill","outline",1,"mt-4",3,"ngModelChange","ngModel","disabled"],["label","Country","label-placement","floating","fill","outline","name","country_id","interface","action-sheet",1,"myCustomSelect","mt-4",3,"ngModelChange","ionChange","ngModel","disabled"],[3,"value",4,"ngFor","ngForOf"],["label","City","label-placement","floating","fill","outline","name","city_id","interface","action-sheet",1,"myCustomSelect","mt-4",3,"ngModelChange","ngModel","disabled"],["label","Category","label-placement","floating","fill","outline","name","category","interface","action-sheet",1,"myCustomSelect","mt-4",3,"ngModelChange","ionChange","ngModel","disabled"],["label","Email Address","label-placement","floating","fill","outline","type","email","name","email",1,"mt-4",3,"ngModelChange","value","ngModel","disabled"],["label","Bio","label-placement","floating","fill","outline","rows","4","name","bio",1,"auto-resize-textarea","mt-4",3,"input","ngModelChange","ngModel","disabled"],["class","mt-4","mode","ios","type","submit","expand","block","color","primary",4,"ngIf"],["mode","ios","expand","block","color","primary","type","button",4,"ngIf"],[1,"custom-spinner-center"],[3,"value"],["mode","ios","type","submit","expand","block","color","primary",1,"mt-4"],["mode","ios","expand","block","color","primary","type","button"],["name","crescent"]],template:function(i,t){if(1&i){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar",1)(2,"ion-buttons",2),e.nrm(3,"ion-back-button",3),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Edit Profile"),e.k0s()()(),e.j41(6,"ion-content",4),e.DNE(7,B,1,0,"ion-spinner",5),e.j41(8,"form",6),e.bIt("submit",function(){return e.eBV(o),e.Njj(t.updateProfile())}),e.j41(9,"ion-grid")(10,"ion-row")(11,"ion-col",7)(12,"div",8)(13,"div",9),e.bIt("click",function(){return e.eBV(o),e.Njj(t.takePicture())}),e.nrm(14,"img",10),e.j41(15,"span",11),e.nrm(16,"ion-icon",12),e.k0s()()()(),e.nrm(17,"ion-col",13),e.j41(18,"ion-col",14)(19,"ion-input",15),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.phone_number,a)||(t.ProfileData.phone_number=a),e.Njj(a)}),e.k0s()()()(),e.j41(20,"ion-input",16),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.first_name,a)||(t.ProfileData.first_name=a),e.Njj(a)}),e.k0s(),e.j41(21,"ion-input",17),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.last_name,a)||(t.ProfileData.last_name=a),e.Njj(a)}),e.k0s(),e.j41(22,"ion-select",18),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.country_id,a)||(t.ProfileData.country_id=a),e.Njj(a)}),e.bIt("ionChange",function(a){return e.eBV(o),e.Njj(t.countryEvent(a))}),e.DNE(23,U,2,2,"ion-select-option",19),e.k0s(),e.j41(24,"ion-select",20),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.city_id,a)||(t.ProfileData.city_id=a),e.Njj(a)}),e.DNE(25,G,2,2,"ion-select-option",19),e.k0s(),e.j41(26,"ion-select",21),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.category,a)||(t.ProfileData.category=a),e.Njj(a)}),e.bIt("ionChange",function(a){return e.eBV(o),e.Njj(t.countryEvent(a))}),e.DNE(27,L,2,2,"ion-select-option",19),e.k0s(),e.j41(28,"ion-input",22),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.email,a)||(t.ProfileData.email=a),e.Njj(a)}),e.k0s(),e.j41(29,"ion-textarea",23,0),e.bIt("input",function(a){return e.eBV(o),e.Njj(t.adjustTextarea(a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(t.ProfileData.bio,a)||(t.ProfileData.bio=a),e.Njj(a)}),e.k0s(),e.DNE(31,$,2,0,"ion-button",24)(32,V,2,0,"ion-button",25),e.k0s()()}2&i&&(e.R7$(7),e.Y8G("ngIf",t.apiLoader),e.R7$(7),e.Y8G("src",t.profilePic,e.B4B),e.R7$(5),e.FS9("value",t.phone_number),e.R50("ngModel",t.ProfileData.phone_number),e.Y8G("disabled",t.hasClick),e.R7$(),e.R50("ngModel",t.ProfileData.first_name),e.Y8G("disabled",t.hasClick),e.R7$(),e.R50("ngModel",t.ProfileData.last_name),e.Y8G("disabled",t.hasClick),e.R7$(),e.R50("ngModel",t.ProfileData.country_id),e.Y8G("disabled",t.hasClick),e.R7$(),e.Y8G("ngForOf",t.countries),e.R7$(),e.R50("ngModel",t.ProfileData.city_id),e.Y8G("disabled",t.hasClick),e.R7$(),e.Y8G("ngForOf",t.cities),e.R7$(),e.R50("ngModel",t.ProfileData.category),e.Y8G("disabled",t.hasClick),e.R7$(),e.Y8G("ngForOf",t.categories),e.R7$(),e.FS9("value",t.email),e.R50("ngModel",t.ProfileData.email),e.Y8G("disabled",t.hasClick),e.R7$(),e.R50("ngModel",t.ProfileData.bio),e.Y8G("disabled",t.hasClick),e.R7$(2),e.Y8G("ngIf",!t.hasClick),e.R7$(),e.Y8G("ngIf",t.hasClick))},dependencies:[b.Sq,b.bT,u.qT,u.BC,u.cb,u.vS,u.cV,l.Jm,l.QW,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.ln,l.Nm,l.Ip,l.w2,l.nc,l.BC,l.ai,l.Je,l.Gw,l.el],styles:[".btn-file[_ngcontent-%COMP%]{position:relative;overflow:hidden;color:var(--ion-color-dark)}.btn-file[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;right:0;min-width:100%;min-height:100%;font-size:100px;text-align:right;filter:alpha(opacity=0);opacity:0;outline:none;background:var(--ion-color-dark);cursor:inherit;display:block}.profile-header[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]{position:relative;min-width:80px;max-width:80px;width:80px;margin:0 auto}.profile-header[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;object-fit:cover;background:#ddd}.profile-header[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px;border-radius:50%;position:absolute;bottom:5px;right:0;font-size:11px;text-align:center}.profile-header[_ngcontent-%COMP%]   .profile-img[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{line-height:inherit;font-size:20px}.auto-resize-textarea[_ngcontent-%COMP%]{resize:none;overflow:hidden}"]});const Y=[{path:"",component:S}];class j{}var f;(g=j).\u0275fac=function(i){return new(i||g)},g.\u0275mod=e.$C({type:g}),g.\u0275inj=e.G2t({imports:[y.iI.forChild(Y),y.iI]});class k{}(f=k).\u0275fac=function(i){return new(i||f)},f.\u0275mod=e.$C({type:f}),f.\u0275inj=e.G2t({imports:[b.MD,u.YN,l.bv,j]})}}]);