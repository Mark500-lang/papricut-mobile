"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7494],{7494:(R,u,s)=>{s.r(u),s.d(u,{CommunitycommentsPageModule:()=>h});var d,m,_=s(177),c=s(4341),o=s(4488),g=s(8986),P=s(467),t=s(4438),f=s(4517),M=s(3366),v=s(2404);function O(i,n){1&i&&t.nrm(0,"ion-spinner",17)}function y(i,n){1&i&&(t.j41(0,"ion-button",18),t.EFF(1,"Post"),t.k0s())}function b(i,n){1&i&&(t.j41(0,"ion-button",19),t.nrm(1,"ion-spinner",20),t.k0s())}function x(i,n){1&i&&(t.j41(0,"ion-card",21)(1,"ion-card-content"),t.EFF(2," There are no comments to display! "),t.k0s()())}function I(i,n){if(1&i&&(t.j41(0,"div",22)(1,"div",23)(2,"ion-note"),t.EFF(3),t.k0s(),t.j41(4,"p",24),t.EFF(5),t.k0s()()()),2&i){const e=n.$implicit;t.R7$(3),t.JRh(e.timeAgo),t.R7$(2),t.JRh(e.comment)}}class p{constructor(n,e,r,a,D,T){this.navCtrl=n,this.alertCtrl=e,this.router=r,this.route=a,this.apiService=D,this.networkService=T,this.list=[],this.errorMessage="",this.page=1,this.perPage=0,this.totalData=0,this.totalPage=0,this.nodataavailable=!1,this.apiLoader=!1,this.hasClick=!1,this.PostData={comment:"",questionId:""}}ngOnInit(){this.route.queryParams.subscribe(n=>{var e;const r=null===(e=this.router.getCurrentNavigation())||void 0===e?void 0:e.extras.state;r&&(this.itemDetails=r.result,this.PostData.questionId=this.itemDetails.id)})}ionViewDidEnter(){this.loadList()}doRefresh(n){this.page=1,this.loadList(),n&&n.detail.complete()}loadList(){!0!==navigator.onLine?this.presentAlert("No Internet Connection!","Please put Internet Connection ON and try again"):(this.apiLoader=!0,this.apiService.getCommentsList(this.page,this.PostData.questionId).then(n=>{this.apiLoader=!1,this.data=n,this.list=this.data.result.data,this.perPage=this.data.result.per_page,this.totalData=this.data.result.total,this.totalPage=this.data.result.total_pages,0==this.data.result.total?this.nodataavailable=!0:this.nodataavailable=!1},n=>{this.apiLoader=!1,this.errorMessage=n}))}doInfinite(n){this.page++,setTimeout(()=>{this.apiService.getCommentsList(this.page,this.PostData.questionId).then(e=>{this.list=this.list.concat(e.result.data),this.perPage=e.result.per_page,this.totalData=e.result.total,this.totalPage=e.result.total_pages,n.target.complete(),this.page>=this.totalPage&&(n.target.disabled=!0)},e=>{console.error("Error while fetching data:",e),n.target.complete()})},100)}postComment(){!0!==navigator.onLine?this.presentAlert("Internet Connection","Please put data connection on and try again"):""===this.PostData.comment?this.presentAlert("","Enter your comment"):(this.hasClick=!0,this.apiService.saveComment(this.PostData).then(n=>{this.hasClick=!1,this.data=n,1==this.data.code&&(this.PostData.comment="",this.loadList()),this.presentAlert("",this.data.message)},n=>{this.hasClick=!1,this.presentAlert("","Request not sent. Please try again")}))}adjustTextarea(n){const e=n.target;e.style.height="auto",e.style.height=e.scrollHeight+"px"}presentAlert(n,e){var r=this;return(0,P.A)(function*(){yield(yield r.alertCtrl.create({header:n,message:e,cssClass:"alertButtonCssAuto",buttons:["OK"]})).present()})()}}(d=p).\u0275fac=function(n){return new(n||d)(t.rXU(f.q9),t.rXU(o.hG),t.rXU(g.Ix),t.rXU(g.nX),t.rXU(M.G),t.rXU(v.A))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-communitycomments"]],decls:21,vars:7,consts:[["color","primary"],["slot","start"],["mode","md","color","light"],[1,"ion-padding"],["class","custom-spinner-center",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","pullingIcon","arrow-dropdown","refreshingSpinner","circles","refreshingText","..fetching"],[3,"submit"],["placeholder","Enter your comment","fill","outline","rows","2","name","comment",1,"auto-resize-textarea","mt-2",3,"input","ngModelChange","ngModel","disabled"],["class","mt-4","mode","ios","type","submit","expand","block","color","primary",4,"ngIf"],["mode","ios","expand","block","color","primary","type","button",4,"ngIf"],["color","secondary",4,"ngIf"],[1,"main_content_div"],[1,"content_div"],["class","card_div",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more comments..."],[1,"custom-spinner-center"],["mode","ios","type","submit","expand","block","color","primary",1,"mt-4"],["mode","ios","expand","block","color","primary","type","button"],["name","crescent"],["color","secondary"],[1,"card_div"],[1,"user_text"],["text-wrap","",1,"description-text"]],template:function(n,e){1&n&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Comments"),t.k0s()()(),t.j41(6,"ion-content",3),t.DNE(7,O,1,0,"ion-spinner",4),t.j41(8,"ion-refresher",5),t.bIt("ionRefresh",function(a){return e.doRefresh(a)}),t.nrm(9,"ion-refresher-content",6),t.k0s(),t.j41(10,"form",7),t.bIt("submit",function(){return e.postComment()}),t.j41(11,"ion-textarea",8),t.bIt("input",function(a){return e.adjustTextarea(a)}),t.mxI("ngModelChange",function(a){return t.DH7(e.PostData.comment,a)||(e.PostData.comment=a),a}),t.k0s(),t.DNE(12,y,2,0,"ion-button",9)(13,b,2,0,"ion-button",10),t.k0s(),t.nrm(14,"hr"),t.DNE(15,x,3,0,"ion-card",11),t.j41(16,"div",12)(17,"div",13),t.DNE(18,I,6,2,"div",14),t.k0s()(),t.j41(19,"ion-infinite-scroll",15),t.bIt("ionInfinite",function(a){return e.doInfinite(a)}),t.nrm(20,"ion-infinite-scroll-content",16),t.k0s()()),2&n&&(t.R7$(7),t.Y8G("ngIf",e.apiLoader),t.R7$(4),t.R50("ngModel",e.PostData.comment),t.Y8G("disabled",e.hasClick),t.R7$(),t.Y8G("ngIf",!e.hasClick),t.R7$(),t.Y8G("ngIf",e.hasClick),t.R7$(2),t.Y8G("ngIf",e.nodataavailable),t.R7$(3),t.Y8G("ngForOf",e.list))},dependencies:[_.Sq,_.bT,c.qT,c.BC,c.cb,c.vS,c.cV,o.Jm,o.QW,o.b_,o.I9,o.W9,o.eU,o.Ax,o.Hp,o.JI,o.To,o.Ki,o.w2,o.nc,o.BC,o.ai,o.Gw,o.el],styles:[".auto-resize-textarea[_ngcontent-%COMP%]{resize:none;overflow:hidden}.main_content_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .user_flex[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.main_content_div[_ngcontent-%COMP%]   .user_flex[_ngcontent-%COMP%]   .user_back[_ngcontent-%COMP%]{height:45px;width:45px;min-width:45px;border-radius:50%;background-position:top;background-size:cover;background-repeat:no-repeat;margin-right:10px}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]{display:flex;overflow:scroll;margin-bottom:16px}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:18px;font-family:semi-bold;margin-right:16px;color:gray}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{border-bottom:1px solid lightgrey;padding-bottom:16px;margin-bottom:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]{display:flex}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_back[_ngcontent-%COMP%]{height:40px;width:40px;min-width:40px;border-radius:50%;background-position:top;background-size:cover;background-repeat:no-repeat}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_detail_info[_ngcontent-%COMP%]   .bold_lbl[_ngcontent-%COMP%]{font-family:semi-bold;font-size:15px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_detail_info[_ngcontent-%COMP%]   .grey_lbl[_ngcontent-%COMP%]{color:gray;font-size:13px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]{display:flex;align-items:center;position:absolute;right:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:7px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]{display:flex;margin-top:5px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:gray;margin-left:-20%!important}"]});const k=[{path:"",component:p}];class C{}var l;(m=C).\u0275fac=function(n){return new(n||m)},m.\u0275mod=t.$C({type:m}),m.\u0275inj=t.G2t({imports:[g.iI.forChild(k),g.iI]});class h{}(l=h).\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.$C({type:l}),l.\u0275inj=t.G2t({imports:[_.MD,c.YN,o.bv,C]})}}]);