"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[498],{498:(I,p,r)=>{r.r(p),r.d(p,{SigninPageModule:()=>b});var m,c,h=r(177),a=r(4341),i=r(4488),d=r(8986),u=r(467),e=r(4438),P=r(4517),S=r(3366),y=r(4796),k=r(7925);function _(l,t){1&l&&(e.j41(0,"ion-button",15),e.EFF(1," SIGN IN "),e.k0s())}function F(l,t){1&l&&(e.j41(0,"ion-button",16),e.nrm(1,"ion-spinner",17),e.k0s())}class f{constructor(t,o,s,n,C,O,x,A){this.alertCtrl=t,this.navCtrl=o,this.loadingController=s,this.formBuilder=n,this.apiService=C,this.authService=O,this.otherService=x,this.router=A,this.hasClick=!1,this.itemForm=this.formBuilder.group({email:["",[a.k0.required,a.k0.email]],password:["",[a.k0.required]]})}ActionLogin(){var t=this;return(0,u.A)(function*(){if(t.itemForm.valid){t.hasClick=!0;const o=t.itemForm.value.email,s=t.itemForm.value.password;try{const n=yield t.apiService.login(o,s);t.hasClick=!1,console.log("Login successful:",JSON.stringify(n.result)),1===n.code?(localStorage.setItem("Papricutcustomeremail",n.result.email),localStorage.setItem("PapricutRightsGroup",n.result.rights_group),localStorage.setItem("Papricutcustomerfirstname",n.result.first_name),localStorage.setItem("Papricutcustomerlastname",n.result.last_name),localStorage.setItem("PapricutcustomermobileNo",n.result.phone_number),localStorage.setItem("PapricutisSuper",n.result.isSuper),yield t.authService.setAuthToken(n.message),yield t.authService.setAuthenticated(),t.itemForm.reset(),yield t.router.navigate(["/home"])):2===n.code?t.presentAlertSignUp(n.message):t.presentAlert("","",n.message)}catch(n){t.hasClick=!1,console.error("Login error:",n),t.presentAlert("Login Failed","","An error occurred. Please try again.")}}else t.presentAlert("","","Please provide valid details")})()}presentAlertSignUp(t){var o=this;return(0,u.A)(function*(){yield(yield o.alertCtrl.create({header:"Create Account",message:t,cssClass:"alertButtonCssAuto",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Cancel clicked")}},{text:"Sign Up Now",handler:()=>{console.log("Sign up now clicked"),o.openRegister()}}]})).present()})()}openRegister(){this.navCtrl.navigateForward(["/register"])}forgotPass(){this.navCtrl.navigateForward(["/forgotpass"])}presentLoading(){var t=this;return(0,u.A)(function*(){yield(yield t.loadingController.create({message:"Loading..."})).present()})()}presentAlert(t,o,s){var n=this;return(0,u.A)(function*(){yield(yield n.alertCtrl.create({header:t,subHeader:o,message:s,cssClass:"alertButtonCssAuto",buttons:["OK"]})).present()})()}}(m=f).\u0275fac=function(t){return new(t||m)(e.rXU(i.hG),e.rXU(P.q9),e.rXU(i.Xi),e.rXU(a.ok),e.rXU(S.G),e.rXU(y.u),e.rXU(k.G),e.rXU(d.Ix))},m.\u0275cmp=e.VBU({type:m,selectors:[["app-signin"]],decls:27,vars:5,consts:[["color","primary"],["slot","start"],["color","light"],[1,"main_content_div"],[1,"header_flex"],["src","assets/imgs/logo.png",1,"logo"],[1,"bold_lbl"],[1,"small_lbl"],[3,"ngSubmit","formGroup"],["position","floating"],["formControlName","email","type","text",1,"center-label",3,"disabled"],["type","password","formControlName","password",1,"center-label",3,"disabled"],["type","submit","expand","block",4,"ngIf"],["mode","ios","expand","block","color","primary","type","button",4,"ngIf"],[1,"forgot_lbl",3,"click"],["type","submit","expand","block"],["mode","ios","expand","block","color","primary","type","button"],["name","crescent"]],template:function(t,o){1&t&&(e.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e.nrm(3,"ion-back-button",2),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Sign In"),e.k0s()()(),e.j41(6,"ion-content")(7,"div",3)(8,"div",4),e.nrm(9,"img",5),e.k0s(),e.j41(10,"ion-label",6),e.EFF(11,"Welcome!"),e.k0s(),e.j41(12,"ion-label",7),e.EFF(13,"Sign in to your account"),e.k0s(),e.j41(14,"form",8),e.bIt("ngSubmit",function(){return o.ActionLogin()}),e.j41(15,"ion-item")(16,"ion-label",9),e.EFF(17,"Email Address"),e.k0s(),e.nrm(18,"ion-input",10),e.k0s(),e.j41(19,"ion-item")(20,"ion-label",9),e.EFF(21,"Password"),e.k0s(),e.nrm(22,"ion-input",11),e.k0s(),e.DNE(23,_,2,0,"ion-button",12)(24,F,2,0,"ion-button",13),e.k0s(),e.j41(25,"p",14),e.bIt("click",function(){return o.forgotPass()}),e.EFF(26,"Forgot password?"),e.k0s()()()),2&t&&(e.R7$(14),e.Y8G("formGroup",o.itemForm),e.R7$(4),e.Y8G("disabled",o.hasClick),e.R7$(4),e.Y8G("disabled",o.hasClick),e.R7$(),e.Y8G("ngIf",!o.hasClick),e.R7$(),e.Y8G("ngIf",o.hasClick))},dependencies:[a.qT,a.BC,a.cb,a.j4,a.JD,h.bT,i.Jm,i.QW,i.W9,i.eU,i.$w,i.uz,i.he,i.w2,i.BC,i.ai,i.Gw,i.el],styles:[".main_content_div[_ngcontent-%COMP%]{width:100%;padding:16px}.main_content_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .header_flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:40px;margin-bottom:20px}.main_content_div[_ngcontent-%COMP%]   .header_flex[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-dark)}.main_content_div[_ngcontent-%COMP%]   .bold_lbl[_ngcontent-%COMP%]{font-size:26px;text-align:center;color:var(--ion-color-dark)}.main_content_div[_ngcontent-%COMP%]   .small_lbl[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-dark);font-size:14px;margin-bottom:30px;margin-top:10px}.main_content_div[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0;--border-radius: 5px;height:50px}.main_content_div[_ngcontent-%COMP%]   .forgot_lbl[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.logo[_ngcontent-%COMP%]{display:block;margin:15% auto auto;width:40%}.center-label[_ngcontent-%COMP%]{display:flex;align-items:center}"]});const M=[{path:"",component:f}];class v{}var g;(c=v).\u0275fac=function(t){return new(t||c)},c.\u0275mod=e.$C({type:c}),c.\u0275inj=e.G2t({imports:[d.iI.forChild(M),d.iI]});class b{}(g=b).\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.$C({type:g}),g.\u0275inj=e.G2t({imports:[a.X1,h.MD,a.YN,i.bv,v]})}}]);