"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1248],{1248:(D,P,s)=>{s.r(P),s.d(P,{CommunityPageModule:()=>x});var g,u,d,h=s(177),l=s(4341),i=s(4488),_=s(8986),p=s(467),t=s(4438),f=s(4517),v=s(3366),M=s(2404);class O{constructor(e,n,o,a,c,C,A){this.toastController=e,this.actionSheetCtrl=n,this.navCtrl=o,this.alertCtrl=a,this.router=c,this.apiService=C,this.networkService=A,this.remove=new t.bkB,this.apiLoader=!1}ngOnInit(){}cardOptions(e,n){var o=this;return(0,p.A)(function*(){const a=[];1===n.canDelete&&a.push({text:"Edit",icon:"create",handler:()=>o.editPost(n)},{text:"Delete",icon:"trash",handler:()=>o.deleteThis(n)}),yield(yield o.actionSheetCtrl.create({header:"Actions",buttons:a})).present()})()}comments(e,n){const o={result:n};this.navCtrl.navigateForward("/communitycomments",{state:o})}editPost(e){const n={result:e};this.navCtrl.navigateForward("/editquestion",{state:n})}deleteThis(e){var n=this;return(0,p.A)(function*(){yield(yield n.alertCtrl.create({header:"Confirm",message:"Do you want to delete this question?",buttons:[{text:"Cancel",role:"cancel"},{text:"Yes",handler:()=>n.deleteNow(e)}]})).present()})()}deleteNow(e){0===this.networkService.checkInternetConnection()?this.presentAlert("","No Internet Connection!","Please put Internet Connection ON and try again"):(this.apiLoader=!0,this.apiService.deleteCommunityItem(e.id).then(n=>{this.apiLoader=!1,this.data=n,this.remove.emit(this.item.id),this.presentAlert("","",this.data.message)},n=>{this.apiLoader=!1,this.presentAlert("","","Request not sent. Please try again later")}))}presentAlert(e,n,o){var a=this;return(0,p.A)(function*(){yield(yield a.alertCtrl.create({header:e,subHeader:n,message:o,buttons:["OK"]})).present()})()}}function k(r,e){1&r&&t.nrm(0,"ion-spinner",15)}function I(r,e){1&r&&(t.j41(0,"ion-button",16),t.EFF(1,"Post"),t.k0s())}function T(r,e){1&r&&(t.j41(0,"ion-button",17),t.nrm(1,"ion-spinner",18),t.k0s())}function L(r,e){1&r&&(t.j41(0,"ion-card",19)(1,"ion-card-content"),t.EFF(2," There are no quetions to display! "),t.k0s()())}function R(r,e){if(1&r){const n=t.RV6();t.j41(0,"app-list-card",20),t.bIt("remove",function(a){t.eBV(n);const c=t.XpG();return t.Njj(c.removeItem(a))}),t.k0s()}if(2&r){const n=e.$implicit;t.Y8G("item",n)}}(g=O).\u0275fac=function(e){return new(e||g)(t.rXU(i.K_),t.rXU(i.GD),t.rXU(f.q9),t.rXU(i.hG),t.rXU(_.Ix),t.rXU(v.G),t.rXU(M.A))},g.\u0275cmp=t.VBU({type:g,selectors:[["app-list-card"]],inputs:{item:"item"},outputs:{remove:"remove"},decls:17,vars:3,consts:[[1,"main_content_div"],[1,"content_div"],[1,"card_div"],[1,"user_text"],["text-wrap","",1,"description-text"],[1,"comments_counter"],[1,"inner_flex",3,"click"],["name","chatbox-outline",1,"icon-item"],["name","pencil-outline",1,"icon-item"],["name","trash-outline",1,"icon-item"]],template:function(e,n){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ion-note"),t.EFF(5),t.k0s(),t.j41(6,"p",4),t.EFF(7),t.k0s(),t.j41(8,"div",5)(9,"div",6),t.bIt("click",function(a){return n.comments(a,n.item)}),t.nrm(10,"ion-icon",7),t.j41(11,"ion-label"),t.EFF(12),t.k0s()(),t.j41(13,"div",6),t.bIt("click",function(){return n.editPost(n.item)}),t.nrm(14,"ion-icon",8),t.k0s(),t.j41(15,"div",6),t.bIt("click",function(){return n.deleteThis(n.item)}),t.nrm(16,"ion-icon",9),t.k0s()()()()()()),2&e&&(t.R7$(5),t.JRh(n.item.timeAgo),t.R7$(2),t.JRh(n.item.question),t.R7$(5),t.JRh(n.item.commentsCount))},dependencies:[i.iq,i.he,i.JI],styles:[".main_content_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block}.main_content_div[_ngcontent-%COMP%]   .user_flex[_ngcontent-%COMP%]{display:flex;margin-bottom:20px}.main_content_div[_ngcontent-%COMP%]   .user_flex[_ngcontent-%COMP%]   .user_back[_ngcontent-%COMP%]{height:45px;width:45px;min-width:45px;border-radius:50%;background-position:top;background-size:cover;background-repeat:no-repeat;margin-right:10px}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]{display:flex;overflow:scroll;margin-bottom:16px}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:18px;font-family:semi-bold;margin-right:16px;color:gray}.main_content_div[_ngcontent-%COMP%]   .text_slider[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--ion-color-primary)}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]{border-bottom:1px solid lightgrey;padding-bottom:16px;margin-bottom:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]{display:flex}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_back[_ngcontent-%COMP%]{height:40px;width:40px;min-width:40px;border-radius:50%;background-position:top;background-size:cover;background-repeat:no-repeat}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_detail_info[_ngcontent-%COMP%]   .bold_lbl[_ngcontent-%COMP%]{font-family:semi-bold;font-size:15px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .user_detail_info[_ngcontent-%COMP%]   .grey_lbl[_ngcontent-%COMP%]{color:gray;font-size:13px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]{display:flex;align-items:center;position:absolute;right:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark)}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_detail[_ngcontent-%COMP%]   .abs_div[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:7px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]{display:flex;margin-top:5px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:16px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:10px}.main_content_div[_ngcontent-%COMP%]   .content_div[_ngcontent-%COMP%]   .card_div[_ngcontent-%COMP%]   .user_text[_ngcontent-%COMP%]   .comments_counter[_ngcontent-%COMP%]   .inner_flex[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;color:gray;margin-left:-20%!important}"]});class y{constructor(e,n,o,a,c,C){this.navCtrl=e,this.alertCtrl=n,this.router=o,this.route=a,this.apiService=c,this.networkService=C,this.list=[],this.errorMessage="",this.page=1,this.perPage=0,this.totalData=0,this.totalPage=0,this.nodataavailable=!1,this.apiLoader=!1,this.isMine=0,this.hasClick=!1,this.PostData={question:""}}ngOnInit(){}ionViewDidEnter(){this.loadList()}doRefresh(e){this.page=1,this.loadList(),e&&e.detail.complete()}loadList(){!0!==navigator.onLine?this.presentAlert("No Internet Connection!","Please put Internet Connection ON and try again"):(this.apiLoader=!0,this.apiService.getCommunityList(this.page,this.isMine).then(e=>{this.apiLoader=!1,this.data=e,this.list=this.data.result.data,this.perPage=this.data.result.per_page,this.totalData=this.data.result.total,this.totalPage=this.data.result.total_pages,0==this.data.result.total?this.nodataavailable=!0:this.nodataavailable=!1},e=>{this.apiLoader=!1,this.errorMessage=e}))}doInfinite(e){this.page++,setTimeout(()=>{this.apiService.getCommunityList(this.page,this.isMine).then(n=>{this.list=this.list.concat(n.result.data),this.perPage=n.result.per_page,this.totalData=n.result.total,this.totalPage=n.result.total_pages,e.target.complete(),this.page>=this.totalPage&&(e.target.disabled=!0)},n=>{console.error("Error while fetching data:",n),e.target.complete()})},100)}postQuestion(){!0!==navigator.onLine?this.presentAlert("Internet Connection","Please put data connection on and try again"):""===this.PostData.question?this.presentAlert("","Enter your question"):(this.hasClick=!0,this.apiService.saveCommunityItem(this.PostData).then(e=>{this.hasClick=!1,this.data=e,1==this.data.code&&(this.PostData.question="",this.loadList()),this.presentAlert("",this.data.message)},e=>{this.hasClick=!1,this.presentAlert("","Request not sent. Please try again")}))}adjustTextarea(e){const n=e.target;n.style.height="auto",n.style.height=n.scrollHeight+"px"}removeItem(e){this.list=this.list.filter(n=>n.id!==e)}presentAlert(e,n){var o=this;return(0,p.A)(function*(){yield(yield o.alertCtrl.create({header:e,message:n,cssClass:"alertButtonCssAuto",buttons:["OK"]})).present()})()}}(u=y).\u0275fac=function(e){return new(e||u)(t.rXU(f.q9),t.rXU(i.hG),t.rXU(_.Ix),t.rXU(_.nX),t.rXU(v.G),t.rXU(M.A))},u.\u0275cmp=t.VBU({type:u,selectors:[["app-community"]],decls:19,vars:7,consts:[["color","primary"],["slot","start"],["mode","md","color","light"],[1,"ion-padding"],["class","custom-spinner-center",4,"ngIf"],["slot","fixed",3,"ionRefresh"],["pullingText","Pull to refresh","pullingIcon","arrow-dropdown","refreshingSpinner","circles","refreshingText","..fetching"],[3,"submit"],["placeholder","Enter your question","fill","outline","rows","2","name","question",1,"auto-resize-textarea","mt-4",3,"input","ngModelChange","ngModel","disabled"],["class","mt-4","mode","ios","type","submit","expand","block","color","primary",4,"ngIf"],["mode","ios","expand","block","color","primary","type","button",4,"ngIf"],["color","secondary",4,"ngIf"],[3,"item","remove",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more questions..."],[1,"custom-spinner-center"],["mode","ios","type","submit","expand","block","color","primary",1,"mt-4"],["mode","ios","expand","block","color","primary","type","button"],["name","crescent"],["color","secondary"],[3,"remove","item"]],template:function(e,n){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),t.nrm(3,"ion-back-button",2),t.k0s(),t.j41(4,"ion-title"),t.EFF(5,"Status Questions"),t.k0s()()(),t.j41(6,"ion-content",3),t.DNE(7,k,1,0,"ion-spinner",4),t.j41(8,"ion-refresher",5),t.bIt("ionRefresh",function(a){return n.doRefresh(a)}),t.nrm(9,"ion-refresher-content",6),t.k0s(),t.j41(10,"form",7),t.bIt("submit",function(){return n.postQuestion()}),t.j41(11,"ion-textarea",8),t.bIt("input",function(a){return n.adjustTextarea(a)}),t.mxI("ngModelChange",function(a){return t.DH7(n.PostData.question,a)||(n.PostData.question=a),a}),t.k0s(),t.DNE(12,I,2,0,"ion-button",9)(13,T,2,0,"ion-button",10),t.k0s(),t.nrm(14,"hr"),t.DNE(15,L,3,0,"ion-card",11)(16,R,1,1,"app-list-card",12),t.j41(17,"ion-infinite-scroll",13),t.bIt("ionInfinite",function(a){return n.doInfinite(a)}),t.nrm(18,"ion-infinite-scroll-content",14),t.k0s()()),2&e&&(t.R7$(7),t.Y8G("ngIf",n.apiLoader),t.R7$(4),t.R50("ngModel",n.PostData.question),t.Y8G("disabled",n.hasClick),t.R7$(),t.Y8G("ngIf",!n.hasClick),t.R7$(),t.Y8G("ngIf",n.hasClick),t.R7$(2),t.Y8G("ngIf",n.nodataavailable),t.R7$(),t.Y8G("ngForOf",n.list))},dependencies:[O,h.Sq,h.bT,l.qT,l.BC,l.cb,l.vS,l.cV,i.Jm,i.QW,i.b_,i.I9,i.W9,i.eU,i.Ax,i.Hp,i.To,i.Ki,i.w2,i.nc,i.BC,i.ai,i.Gw,i.el],styles:[".auto-resize-textarea[_ngcontent-%COMP%]{resize:none;overflow:hidden}"]});const j=[{path:"",component:y}];class b{}(d=b).\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.$C({type:d}),d.\u0275inj=t.G2t({imports:[_.iI.forChild(j),_.iI]});var m,F=s(3887);class x{}(m=x).\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.$C({type:m}),m.\u0275inj=t.G2t({imports:[F.G,h.MD,l.YN,i.bv,b]})}}]);